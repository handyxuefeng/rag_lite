# /Users/good/.config/uv/uv.toml
# 苹果intel芯片在使用uv sync 安装torch2.9
```
error: Distribution torch==2.9.1 @ registry+https://pypi.tuna.tsinghua.edu.cn/simple/ can't be installed because it doesn't have a source distribution or wheel for the current platform hint: You're on macOS (macosx_12_0_x86_64), but torch (v2.9.1) only has wheels for the following platforms: manylinux_2_28_aarch64, manylinux_2_28_x86_64, macosx_11_0_arm64, win_amd64; consider adding "sys_platform == 'darwin' and platform_machine == 'x86_64'" to tool.uv.required-environments to ensure uv resolves to a version with compatible wheels


```

/Users/good/.config/uv/uv.toml

```设置清华源的方式
# 这是 uv.toml 的 PyPI 镜像源配置（清华源）
[[index]]
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"
```

# 一些安装包的版本问题
- 针对mac intel芯片的 x86架构，torch 和 onnxruntime需要如下版本
- 因为我的电脑是inter芯片，目前python版本只能用3.11的版本才能使用torch和onnxruntime的如下版本
```
uv add torch==2.2.2
uv add onnxruntime==1.19.2
```

# 在使用chroma保存分割好的文本块时，报 Numpy is Numpy is not available
- 解决方案：

# 文本分割，大文件文件分割的性能问题
- I/O 密集型 vs CPU 密集型
 - I/O 密集型任务：大部分时间在等待（网络请求、文件读写、数据库查询）。这类任务适合使用线程。
 - CPU 密集型任务：大部分时间在计算（数学运算、图像处理、数据分析）。这类任务适合使用进程。

Python 的 GIL（全局解释器锁）
GIL 是 Python 的一个特性，它限制了同一时刻只能有一个线程执行 Python 代码。这意味着：

线程：适合 I/O 密集型任务（因为等待 I/O 时会释放 GIL）
进程：适合 CPU 密集型任务（每个进程有独立的 GIL，可以真正并行）
3. concurrent.futures 简介
concurrent.futures 模块提供了两个核心执行器：

ThreadPoolExecutor：线程池执行器，适合 I/O 密集型任务
ProcessPoolExecutor：进程池执行器，适合 CPU 密集型任务

# 点击重新处理时，需要做的事情
- 如果是文档是重新处理或者删除，则要根据该文档找到属于哪个知识库，找到知识库后，把知识库下的这个文档全部删除掉

- 如果是删除知识库，则比较干脆，直接删除删除知识库和该知识库下的所有文档




# 1.普通聊天
message = [
    ('system',"你是一个乐于助人的好助手,请热心的回答用户的问题"),
    ('human',"1+1=?")
]
# 2.知识库聊天
message =[
    ('system',"你是一个关于解读民法典的法律专家,请热心解读用户咨询的法律知识"),
    ('human','文件内容如下
        {content}
       用户的问题如下:
       {question}
       1+1=?
       请居于文档回答问题，如果文档中没有答案，可以回答不知道
    ')

]
